!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(){this.items=[],this.timer=null,this.stamp=0,this.time=0,this._date=new Date,this.init()}function n(t){var e,n,i,a={};return 0>=t?t=e=n=i=0:(t=parseInt(t/1e3),e=t%60,t=parseInt(t/60),n=t%60,t=parseInt(t/60),i=t%24,t=parseInt(t/24)),a={day:t,hour:r(i),minute:r(n),second:r(e)}}function r(t){return t.toString().replace(/^(\d)$/,"0$1")}function i(t,e){for(var n in e)t[n]=e[n];return t}function a(){return u||(u=new e),u}function o(t,e){return t.replace(c,function(t,n){return e[n]+""||""})}var u,c=/\{\{(.*?)\}\}/g;e.prototype.init=function(){var e=this;t.ajax({url:"./api/stampTime.json",type:"GET",dataType:"json",success:function(t){t.success&&e.startCount(1e3*t.data.time)},error:function(t,e){console.log(e)}})},e.prototype.startCount=function(e){function n(){var e=+new Date,n=i([],r.items);r.stamp=e,r.time+=1e3,r._date=new Date(r.time),n.length||clearInterval(r.timer),t.each(n,function(t,e){r.countItem(e)})}var r=this;r.time=e,n(),r.timer=setInterval(n,1e3)},e.prototype.countItem=function(t){var e=this,r=t.date,i=r-e._date,a=o(t.match,n(i));t.ele.innerHTML=a,0>=i&&t.ended&&t.ended(t,e)},e.prototype.addItem=function(t){for(var e=this,n=e.items,r=0;r<n.length;r++)if(n[r].ele===t.ele)return!1;n.push(t)},e.prototype.removeItem=function(t){for(var e=this,n=e.items,r=-1,i=0;i<n.length;i++)if(n[i].ele===t.ele){r=i;break}-1!==r&&n.splice(r,1)},t.fn.countdown=function(e){return this.each(function(n,r){var i=a(),o=t(r).attr("start-date").replace(/\-/g,"/"),u=t(r).attr("match");i.addItem({ele:r,date:new Date(o),match:u,ended:e})})}});